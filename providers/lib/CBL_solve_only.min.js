/* Сокращено до объёма решения капчи по загружаемой модели */
/*
 * CBL-js
 * CAPTCHA Breaking Library in JavaScript
 * https://github.com/skotz/cbl-js
 * Copyright (c) 2015-2021 Scott Clayton
 */
var CBL=function(t){var e={preprocess:function(){console.log("You should define a preprocess method!")},model_file:"",model_string:"",model_loaded:function(){},training_complete:function(){},blob_min_pixels:1,blob_max_pixels:99999,blob_min_width:1,blob_min_height:1,blob_max_width:99999,blob_max_height:99999,pattern_width:20,pattern_height:20,pattern_maintain_ratio:!1,pattern_auto_rotate:!1,incorrect_segment_char:"\\",blob_debug:"",blob_console_debug:!1,perceptive_colorspace:!1,character_set:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",fixed_blob_locations:[],exact_characters:-1,exact_characters_width:-1,exact_characters_play:-1};for(var a in t=t||{},e)e.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(t[a]=e[a]);var r={solve:function(t){return r.train(t)},done:function(t){l((function(){t(d),u()}))},train:function(e){return l((function(){var a,r=!1;null!=document.getElementById(e)?a=document.getElementById(e):(a=document.createElement("img"),r=!0);var i=function(){var e="",r=document.createElement("canvas");r.width=a.width,r.height=a.height,r.getContext("2d",{willReadFrequently:!0}).drawImage(a,0,0);var i,o=new n(r);t.preprocess(o),i=t.fixed_blob_locations.length>0?o.segmentBlocks(t.pattern_width,t.pattern_height,t.fixed_blob_locations,t.blob_debug):o.segmentBlobs(t.blob_min_pixels,t.blob_max_pixels,t.pattern_width,t.pattern_height,t.blob_debug);for(var h=0;h<i.length;h++)e+=g(c(i[h]));console.log("Solution = "+e),d=e,u()};a.complete&&!r?i():(a.onload=i,r&&(a.src=e))})),this},loadModelString:function(e){e=C.decompressFromBase64(e),i=new Array;for(var a=e.replace(/\[/g,"").split("]"),r=0;r<a.length;r++){var n=a[r].split("=");if(2==n.length){var o=n[1],h=n[0];i.push({pattern:o,solution:h})}}i.length?t.model_loaded():console.log("No patterns to load in provided model.")}},n=function(e){var a={colorRegions:function(t,r,n){void 0===r&&(r=!1),void 0===n&&(n=0);for(var i=new Array,o=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,e.width,e.height),h=0;h<o.width;h++)for(var d=0;d<o.height;d++){var l=4*h+4*d*o.width;x(i,l)||a.floodfill(h,d,y(),t,o,i,r,n)}return e.getContext("2d",{willReadFrequently:!0}).putImageData(o,0,0),this},floodfill:function(t,a,r,n,i,o,h,d){var l=!1;void 0===i&&(l=!0,i=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,e.width,e.height)),void 0===d&&(d=0);var u,g,c=i.data,s=c.length,f=[],v=4*(t+a*i.width),m=v,_=v,y=4*i.width,b=[c[v],c[v+1],c[v+2],c[v+3]],C=c[v]+c[v+1]+c[v+2]+c[v+3];if(!w(v,b,C,r,c,s,n))return!1;for(f.push(v);f.length;)if(v=f.pop(),(void 0===o||!x(o,v))&&p(v,b,C,r,c,s,n,o,h)){for(m=v,_=v,u=(g=v/y*y)+y;g<(_-=4)&&p(_,b,C,r,c,s,n,o,h););for(;u>(m+=4)&&p(m,b,C,r,c,s,n,o,h););d>0&&(_-=4*d,m+=4*d);for(var I=_;I<m;I+=4)I-y>=0&&w(I-y,b,C,r,c,s,n)&&f.push(I-y),I+y<s&&w(I+y,b,C,r,c,s,n)&&f.push(I+y)}l&&e.getContext("2d",{willReadFrequently:!0}).putImageData(i,0,0)},blur:function(t){return void 0===t&&(t=1),2==t?this.convolute([[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1]],.04):3==t?this.convolute([[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1]],1/49):this.convolute([[1,1,1],[1,1,1],[1,1,1]],1/9)},sharpen:function(){return this.convolute([[0,-1,0],[-1,5,-1],[0,-1,0]])},grayscale:function(){for(var t=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,e.width,e.height),a=0;a<t.width;a++)for(var r=0;r<t.height;r++){var n=4*a+4*r*t.width,i=.34*t.data[n]+.5*t.data[n+1]+.16*t.data[n+2];t.data[n]=i,t.data[n+1]=i,t.data[n+2]=i,t.data[n+3]=255}return e.getContext("2d",{willReadFrequently:!0}).putImageData(t,0,0),this},removeGray:function(t){for(var a=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,e.width,e.height),r=0;r<a.width;r++)for(var n=0;n<a.height;n++){var i=4*r+4*n*a.width;Math.max(Math.abs(a.data[i]-a.data[i+1]),Math.abs(a.data[i+1]-a.data[i+2]),Math.abs(a.data[i+2]-a.data[i]))<t&&(a.data[i]=255,a.data[i+1]=255,a.data[i+2]=255,a.data[i+3]=255)}return e.getContext("2d",{willReadFrequently:!0}).putImageData(a,0,0),this},removeLight:function(t){for(var a=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,e.width,e.height),r=0;r<a.width;r++)for(var n=0;n<a.height;n++){var i=4*r+4*n*a.width;Math.max(a.data[i],a.data[i+1],a.data[i+2])>t&&(a.data[i]=255,a.data[i+1]=255,a.data[i+2]=255,a.data[i+3]=255)}return e.getContext("2d",{willReadFrequently:!0}).putImageData(a,0,0),this},binarize:function(t){for(var a=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,e.width,e.height),r=0;r<a.width;r++)for(var n=0;n<a.height;n++){var i=4*r+4*n*a.width,o=.34*a.data[i]+.5*a.data[i+1]+.16*a.data[i+2];a.data[i]=o>=t?255:0,a.data[i+1]=o>=t?255:0,a.data[i+2]=o>=t?255:0,a.data[i+3]=255}return e.getContext("2d",{willReadFrequently:!0}).putImageData(a,0,0),this},convolute:function(t,a){var r=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,e.width,e.height),n=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,e.width,e.height),i=t[0].length,o=t.length,h=Math.floor(o/2);void 0===a&&(a=1);for(var d=0;d<r.height-1;d++)for(var l=0;l<r.width-1;l++){for(var u=4*l+4*d*r.width,g=0,c=0,s=0,f=0;f<i;f++)for(var w=0;w<o;w++){var p=4*((d+(f-h))*r.width+(l+(w-h)));g+=r.data[(p+r.data.length)%r.data.length]*t[f][w],c+=r.data[(p+1+r.data.length)%r.data.length]*t[f][w],s+=r.data[(p+2+r.data.length)%r.data.length]*t[f][w]}n.data[u+0]=a*g+0,n.data[u+1]=a*c+0,n.data[u+2]=a*s+0,n.data[u+3]=255}return e.getContext("2d",{willReadFrequently:!0}).putImageData(n,0,0),this},erode:function(){return this.convolute([[-1,-1,-1],[-1,8,-1],[-1,-1,-1]])},foreach:function(t){for(var a=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,e.width,e.height),r=0;r<a.width;r++)for(var n=0;n<a.height;n++){var i=4*r+4*n*a.width,o={r:a.data[i+0],g:a.data[i+1],b:a.data[i+2]};o=t(o),a.data[i+0]=o.r,a.data[i+1]=o.g,a.data[i+2]=o.b,a.data[i+3]=255}return e.getContext("2d",{willReadFrequently:!0}).putImageData(a,0,0),this},removeTransparency:function(t,a){void 0===t&&(t=128),void 0===a&&(a={r:255,g:255,b:255});for(var r=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,e.width,e.height),n=0;n<r.width;n++)for(var i=0;i<r.height;i++){var o=4*n+4*i*r.width;r.data[o+3]<=t&&(r.data[o+0]=a.r,r.data[o+1]=a.g,r.data[o+2]=a.b,r.data[o+3]=255)}return e.getContext("2d",{willReadFrequently:!0}).putImageData(r,0,0),this},invert:function(t){return this.foreach((function(t){return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,t}))},cropRelative:function(t,a,r,n){var i=e.getContext("2d",{willReadFrequently:!0}).getImageData(t,a,e.width-t-r,e.height-a-n);return e.width=e.width-t-r,e.height=e.height-a-n,e.getContext("2d",{willReadFrequently:!0}).putImageData(i,0,0),this},removeHorizontalLine:function(t,a){void 0===a&&(a={r:0,g:0,b:0}),void 0===t&&(t=1);for(var r=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,e.width,e.height),n=[0,-1,1],i=[],o=0;o<e.height;o++){(d=this.getPixel(0,o)).r==a.r&&d.g==a.g&&d.b==a.b&&i.push({x:0,y:o})}var h=[];for(o=0;o<e.height;o++){var d;(d=this.getPixel(e.width-1,o)).r==a.r&&d.g==a.g&&d.b==a.b&&h.push({x:e.width-1,y:o})}for(var l=this,u=1e4,g=[],c=function(t,i,o){if(0){var d=4*t+4*i*r.width;r.data[d+0]=255,r.data[d+1]=0,r.data[d+2]=0,r.data[d+3]=255}if(u--<=0)return null;var s=[],f=JSON.parse(JSON.stringify(o));if(f.points.push({x:t,y:i}),t>=e.width-1&&h.some((function(t){return t.x==f.points[f.points.length-1].x&&t.y==f.points[f.points.length-1].y})))return f;var w=l.getPixel(t,i);if(w.r!=a.r||w.g!=a.g||w.b!=a.b)return null;for(var p=0;p<n.length;p++)if(i+n[p]>=0&&i+n[p]<e.height){if(f.vertical+=Math.abs(n[p]),g.some((function(e){return e.x==t+1&&e.y==i+n[p]})))continue;var v=c(t+1,i+n[p],f);if(null!=v)return s.push(v),v;g.push({x:t+1,y:i+n[p]})}return s&&s.length?s.reduce((function(t,e){return t.vertical<e.vertical?t:e})):null},s=0;s<i.length;s++){var f=c(i[s].x,i[s].y,{points:[],vertical:0});if(f&&f.points)for(var w=0;w<f.points.length;w++)for(var p=-t;p<=t;p++){var v=4*f.points[w].x+4*(f.points[w].y+p)*r.width,m=4*f.points[w].x+4*(f.points[w].y+p-1)*r.width;r.data[v+0]=r.data[m+0],r.data[v+1]=r.data[m+1],r.data[v+2]=r.data[m+2],r.data[v+3]=255}}return e.getContext("2d",{willReadFrequently:!0}).putImageData(r,0,0),this},getPixel:function(t,a){var r=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,e.width,e.height),n=4*t+4*a*r.width;return{r:r.data[n+0],g:r.data[n+1],b:r.data[n+2]}},segmentBlocks:function(a,r,n,i){void 0===a&&(a=20),void 0===r&&(r=20),void 0===n&&(n=[]);for(var o=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,e.width,e.height),h=new Array,d=0;d<n.length;d++){var l=document.createElement("canvas");l.width=o.width,l.height=o.height;l.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,e.width,e.height).data;var u=n[d].x1,g=n[d].x2,c=n[d].y1,s=n[d].y2,f=document.createElement("canvas");if(f.width=g-u+1,f.height=s-c+1,f.getContext("2d",{willReadFrequently:!0}).putImageData(o,-u,-c,u,c,f.width,f.height),l.width=a,l.height=r,t.pattern_maintain_ratio){var w=f.width,p=f.height;w/a>p/r?l.getContext("2d",{willReadFrequently:!0}).drawImage(f,0,0,a,p*(a/w)):l.getContext("2d",{willReadFrequently:!0}).drawImage(f,0,0,w*(r/p),r)}else l.getContext("2d",{willReadFrequently:!0}).drawImage(f,0,0,a,r);if(h.push(l),void 0!==i&&i.length){var v=document.createElement("img");v.src=l.toDataURL(),document.getElementById(i).appendChild(v)}}return h},segmentBlobs:function(r,n,i,o,h){void 0===r&&(r=1),void 0===n&&(n=1e5),void 0===i&&(i=20),void 0===o&&(o=20);for(var d=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,e.width,e.height),l=function(t,e){return 255*t[e]*255+256*t[e+1]+t[e+2]},u=l([255,255,255],0),g=new Array,c=0;c<d.width;c++)for(var f=0;f<d.height;f++){var w=4*c+4*f*d.width,p=l(d.data,w);x(g,p)||p==u||g.push(p)}for(var v=new Array,m=0;m<g.length;m++){var _=document.createElement("canvas");_.width=d.width,_.height=d.height;var y=(j=_.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,e.width,e.height)).data,C=0,I=d.width,R=0,F=d.height,M=0;for(c=0;c<d.width;c++)for(f=0;f<d.height;f++){w=4*c+4*f*d.width;(p=l(d.data,w))==g[m]?(y[w]=0,y[w+1]=0,y[w+2]=0,y[w+3]=255,C++,c<I&&(I=c),c>R&&(R=c),f<F&&(F=f),f>M&&(M=f)):(y[w]=255,y[w+1]=255,y[w+2]=255,y[w+3]=255)}if(C>=r&&C<=n&&R-I>=t.blob_min_width&&M-F>=t.blob_min_height&&R-I<=t.blob_max_width&&M-F<=t.blob_max_height){if((O=document.createElement("canvas")).width=R-I+1,O.height=M-F+1,O.getContext("2d",{willReadFrequently:!0}).putImageData(j,-I,-F,I,F,O.width,O.height),_.width=i,_.height=o,_.orig_width=O.width,_.orig_image=O,t.pattern_maintain_ratio)(B=O.width)/i>(P=O.height)/o?_.getContext("2d",{willReadFrequently:!0}).drawImage(O,0,0,i,P*(i/B)):_.getContext("2d",{willReadFrequently:!0}).drawImage(O,0,0,B*(o/P),o);else _.getContext("2d",{willReadFrequently:!0}).drawImage(O,0,0,i,o);t.pattern_auto_rotate&&(_=a.histogramRotate(_)),v.push(_)}}if(t.exact_characters>0){for(;v.length<t.exact_characters;){var q=0,D=v[0].orig_width;for(w=1;w<v.length;w++)v[w].orig_width>D&&(D=v[w].orig_width,q=w);var A=2;t.exact_characters_width>0&&(A=Math.ceil(D/t.exact_characters_width),A=Math.max(A,2),A=Math.min(A,t.exact_characters-v.length+1));for(var E=1;E<=A;E++){var O,B,P,U=s(v[q].orig_image),j=U.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,U.width,U.height),k=U.width/A;if(I=Math.floor(k*(E-1)),R=Math.floor(k*E),F=0,M=U.height,t.exact_characters_play>0){for(var S=0,T=0,L=I-t.exact_characters_play;L<I+t.exact_characters_play;L++){for(var z=0,N=F;N<M;N++){255==(Y=b(j,L,N)).r&&255==Y.g&&255==Y.b&&z++}z>S&&(T=L,S=z)}I=T;var J=0,G=0;for(L=R+t.exact_characters_play;L>R-t.exact_characters_play;L--){var H=0;for(N=F;N<M;N++){255==(Y=b(j,L,N)).r&&255==Y.g&&255==Y.b&&H++}H>J&&(G=L,J=H)}R=G}for(N=F;N<M&&0==F;N++)for(L=I;L<R&&0==F;L++){255==(Y=b(j,L,N)).r&&255==Y.g&&255==Y.b||(F=N)}for(N=M-1;N>F&&M==U.height;N--)for(L=I;L<R&&M==U.height;L++){var Y;255==(Y=b(j,L,N)).r&&255==Y.g&&255==Y.b||(M=N)}if((O=document.createElement("canvas")).width=R-I+1,O.height=M-F+1,O.getContext("2d",{willReadFrequently:!0}).putImageData(j,-I,-F,I,F,O.width,O.height),U.width=i,U.height=o,U.orig_width=O.width,U.orig_image=O,t.pattern_maintain_ratio)(B=O.width)/i>(P=O.height)/o?U.getContext("2d",{willReadFrequently:!0}).drawImage(O,0,0,i,P*(i/B)):U.getContext("2d",{willReadFrequently:!0}).drawImage(O,0,0,B*(o/P),o);else U.getContext("2d",{willReadFrequently:!0}).drawImage(O,0,0,i,o);t.pattern_auto_rotate&&(U=a.histogramRotate(U)),v.splice(q+E,0,U)}v.splice(q,1)}for(;v.length>t.exact_characters;){var K=0,Q=v[0].orig_width;for(w=1;w<v.length;w++)v[w].orig_width<Q&&(Q=v[w].orig_width,K=w);v.splice(K,1)}}return v},histogramRotate:function(t){var e=new Image;e.src=t.toDataURL();for(var a=t,r=t.width,n=-45;n<=45;n+=5){var i=document.createElement("canvas"),o=i.getContext("2d",{willReadFrequently:!0});i.width=t.width,i.height=t.height,o.save(),o.translate(t.width/2,t.height/2),o.rotate(n*Math.PI/180),o.drawImage(e,-e.width/2,-e.width/2),o.restore();for(var h=o.getImageData(0,0,i.width,i.height),d=0,l=0;l<h.width;l++)for(var u=0;u<h.height;u++){var g=4*l+4*u*h.width;if(255!=h.data[g]&&0!=h.data[g+3]){d++;break}}o.putImageData(h,0,0),d<r&&(r=d,a=i)}return a}};return a},i=new Array,o=(new Array,new Array),h=!1,d="",l=function(t){o.push(t),h||u()},u=function(){o.length?(h=!0,o.shift()()):h=!1},g=function(t){for(var e=4e9,a="?",r=0;r<i.length;r++){var n=f(i[r].pattern,t);n<e&&(e=n,a=i[r].solution)}return a},c=function(t){for(var e=new Array,a=t.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,t.width,t.height),r=0;r<a.width;r++)for(var n=0;n<a.height;n++){var i=4*r+4*n*a.width,o=Math.round(.34*a.data[i]+.5*a.data[i+1]+.16*a.data[i+2]);a.data[i+3]<255&&(o=255),e.push(o)}return e.join(".")},s=function(t){var e=document.createElement("canvas"),a=e.getContext("2d",{willReadFrequently:!0});return e.width=t.width,e.height=t.height,a.drawImage(t,0,0),e},f=function(t,e){for(var a=t.split("."),r=e.split("."),n=0,i=0;i<a.length;i++)n+=(a[i]-r[i])*(a[i]-r[i]);return Math.sqrt(n/a.length)},w=function(e,a,r,n,i,o,h){if(e<0||e>=o)return!1;var d=v(a,0),l=v(i,e);if(0==m(d,n))return!1;if(0==m(d,l))return!0;if(t.perceptive_colorspace){if(_(d,l)<=h)return!0}else if(m(d,l)<=h)return!0;return!1},p=function(t,e,a,r,n,i,o,h,d){return!!w(t,e,a,r,n,i,o)&&((void 0===h||!x(h,t))&&(d&&255==n[t]&&255==n[t+1]&&255==n[t+2]||(n[t]=r.r,n[t+1]=r.g,n[t+2]=r.b,n[t+3]=r.a),void 0!==h&&h.push(t),!0))},v=function(t,e){return{r:t[e],g:t[e+1],b:t[e+2]}},m=function(t,e){return Math.sqrt((Math.pow(t.r-e.r,2),Math.pow(t.g-e.g,2),Math.pow(t.g-e.g,2)/3))},_=function(t,e){var a=function(t){var e=t.r/255,a=t.g/255,r=t.b/255;return e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,{x:.4124*(e*=100)+.3576*(a*=100)+.1805*(r*=100),y:.2126*e+.7152*a+.0722*r,z:.0193*e+.1192*a+.9505*r}},r=function(t){var e=t.x/95.047,a=t.y/100,r=t.z/108.883;return e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,{l:116*(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116)-16,a:500*(e-a),b:200*(a-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))}};return function(t,e){var n=r(a(t)),i=r(a(e));return Math.sqrt(Math.pow(n.l-i.l,2)+Math.pow(n.a-i.a,2)+Math.pow(n.b-i.b,2))}(t,e)},x=function(t,e){for(var a=0;a<t.length;a++)if(t[a]===e)return!0;return!1},y=function(){for(var t,e,a=Math.round(200*Math.random())+55;(t=Math.round(200*Math.random())+55)==a;);for(;(e=Math.round(200*Math.random())+55)==a||e==t;);return function(t,e,a){return{r:t,g:e,b:a,a:255}}(a,t,e)},b=function(t,e,a){var r=4*e+4*a*t.width;return{r:t.data[r+0],g:t.data[r+1],b:t.data[r+2]}},C=function(){function t(t,e){if(!n[t]){n[t]={};for(var a=0;a<t.length;a++)n[t][t.charAt(a)]=a}return n[t][e]}var e=String.fromCharCode,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={},i={compressToBase64:function(t){if(null==t)return"";var e=i._compress(t,6,(function(t){return a.charAt(t)}));switch(e.length%4){default:case 0:return e;case 1:return e+"===";case 2:return e+"==";case 3:return e+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,(function(r){return t(a,e.charAt(r))}))},compressToUTF16:function(t){return null==t?"":i._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:i._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=i.compress(t),a=new Uint8Array(2*e.length),r=0,n=e.length;n>r;r++){var o=e.charCodeAt(r);a[2*r]=o>>>8,a[2*r+1]=o%256}return a},decompressFromUint8Array:function(t){if(null==t)return i.decompress(t);for(var a=new Array(t.length/2),r=0,n=a.length;n>r;r++)a[r]=256*t[2*r]+t[2*r+1];var o=[];return a.forEach((function(t){o.push(e(t))})),i.decompress(o.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":i._compress(t,6,(function(t){return r.charAt(t)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,(function(a){return t(r,e.charAt(a))})))},compress:function(t){return i._compress(t,16,(function(t){return e(t)}))},_compress:function(t,e,a){if(null==t)return"";var r,n,i,o={},h={},d="",l="",u="",g=2,c=3,s=2,f=[],w=0,p=0;for(i=0;i<t.length;i+=1)if(d=t.charAt(i),Object.prototype.hasOwnProperty.call(o,d)||(o[d]=c++,h[d]=!0),l=u+d,Object.prototype.hasOwnProperty.call(o,l))u=l;else{if(Object.prototype.hasOwnProperty.call(h,u)){if(u.charCodeAt(0)<256){for(r=0;s>r;r++)w<<=1,p==e-1?(p=0,f.push(a(w)),w=0):p++;for(n=u.charCodeAt(0),r=0;8>r;r++)w=w<<1|1&n,p==e-1?(p=0,f.push(a(w)),w=0):p++,n>>=1}else{for(n=1,r=0;s>r;r++)w=w<<1|n,p==e-1?(p=0,f.push(a(w)),w=0):p++,n=0;for(n=u.charCodeAt(0),r=0;16>r;r++)w=w<<1|1&n,p==e-1?(p=0,f.push(a(w)),w=0):p++,n>>=1}0==--g&&(g=Math.pow(2,s),s++),delete h[u]}else for(n=o[u],r=0;s>r;r++)w=w<<1|1&n,p==e-1?(p=0,f.push(a(w)),w=0):p++,n>>=1;0==--g&&(g=Math.pow(2,s),s++),o[l]=c++,u=String(d)}if(""!==u){if(Object.prototype.hasOwnProperty.call(h,u)){if(u.charCodeAt(0)<256){for(r=0;s>r;r++)w<<=1,p==e-1?(p=0,f.push(a(w)),w=0):p++;for(n=u.charCodeAt(0),r=0;8>r;r++)w=w<<1|1&n,p==e-1?(p=0,f.push(a(w)),w=0):p++,n>>=1}else{for(n=1,r=0;s>r;r++)w=w<<1|n,p==e-1?(p=0,f.push(a(w)),w=0):p++,n=0;for(n=u.charCodeAt(0),r=0;16>r;r++)w=w<<1|1&n,p==e-1?(p=0,f.push(a(w)),w=0):p++,n>>=1}0==--g&&(g=Math.pow(2,s),s++),delete h[u]}else for(n=o[u],r=0;s>r;r++)w=w<<1|1&n,p==e-1?(p=0,f.push(a(w)),w=0):p++,n>>=1;0==--g&&(g=Math.pow(2,s),s++)}for(n=2,r=0;s>r;r++)w=w<<1|1&n,p==e-1?(p=0,f.push(a(w)),w=0):p++,n>>=1;for(;;){if(w<<=1,p==e-1){f.push(a(w));break}p++}return f.join("")},decompress:function(t){return null==t?"":""==t?null:i._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(t,a,r){var n,i,o,h,d,l,u,g=[],c=4,s=4,f=3,w="",p=[],v={val:r(0),position:a,index:1};for(n=0;3>n;n+=1)g[n]=n;for(o=0,d=Math.pow(2,2),l=1;l!=d;)h=v.val&v.position,v.position>>=1,0==v.position&&(v.position=a,v.val=r(v.index++)),o|=(h>0?1:0)*l,l<<=1;switch(o){case 0:for(o=0,d=Math.pow(2,8),l=1;l!=d;)h=v.val&v.position,v.position>>=1,0==v.position&&(v.position=a,v.val=r(v.index++)),o|=(h>0?1:0)*l,l<<=1;u=e(o);break;case 1:for(o=0,d=Math.pow(2,16),l=1;l!=d;)h=v.val&v.position,v.position>>=1,0==v.position&&(v.position=a,v.val=r(v.index++)),o|=(h>0?1:0)*l,l<<=1;u=e(o);break;case 2:return""}for(g[3]=u,i=u,p.push(u);;){if(v.index>t)return"";for(o=0,d=Math.pow(2,f),l=1;l!=d;)h=v.val&v.position,v.position>>=1,0==v.position&&(v.position=a,v.val=r(v.index++)),o|=(h>0?1:0)*l,l<<=1;switch(u=o){case 0:for(o=0,d=Math.pow(2,8),l=1;l!=d;)h=v.val&v.position,v.position>>=1,0==v.position&&(v.position=a,v.val=r(v.index++)),o|=(h>0?1:0)*l,l<<=1;g[s++]=e(o),u=s-1,c--;break;case 1:for(o=0,d=Math.pow(2,16),l=1;l!=d;)h=v.val&v.position,v.position>>=1,0==v.position&&(v.position=a,v.val=r(v.index++)),o|=(h>0?1:0)*l,l<<=1;g[s++]=e(o),u=s-1,c--;break;case 2:return p.join("")}if(0==c&&(c=Math.pow(2,f),f++),g[u])w=g[u];else{if(u!==s)return null;w=i+i.charAt(0)}p.push(w),g[s++]=i+w.charAt(0),i=w,0==--c&&(c=Math.pow(2,f),f++)}}};return i}();return"function"==typeof define&&define.amd?define((function(){return C})):"undefined"!=typeof module&&null!=module&&(module.exports=C),t.model_file.length?r.loadModel(t.model_file):t.model_string.length&&r.loadModelString(t.model_string),r};
