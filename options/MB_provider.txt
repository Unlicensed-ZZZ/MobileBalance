<!--
 *
 * Проект:    MobileBalance
 * Описание:  Структура JSON-файла описания плагина для расширения MobileBalance
 * Редакция:  2024.07.25
 *
-->

Примечание: 1. Структуры параметров можно дополнительно изучить на примере плагинов, входящих в состав
               расширения. Настройки провайдера можно сохранить на странице основных настроек расширения.
               Таким образом, можно сохранить настройки для каждого из плагинов, которые входят в комплект
               поставки расширения как первый из двух файлов-составляющих плагина. Второй файл, - файл
               скрипта, может быть скопирован вручную из файловой структуры расширения (см. дополнительную
               информацию в описании алгоритма работы скрипта).
            2. Будьте внимательны при удалении провайдера, входящего в состав расширения. Если в дальнейшем
               понадобится вернуться к его использованию - сохраните в файл параметры провайдера перед его
               удалением. Их формирование вручную вновь может оказаться сложным.
            3. При обновлении расширения параметры записей о провайдерах, распространяемых в составе расширения
               (присутствуют в файле '.\providers\providers.json'), замещаются для них значениями из обновления.
               Если вы изменяли значения для какого-то из таких провайдеров, то это нужно сделть повторно или
               сохраните для такой записи изменённые значения в файл и загрузите их после обновления расширения.
            4. При удалении параметров провайдера расширение не контролирует его использование какими-либо
               записями учётных данных. При наличии записей учётных данных, в которых указан уже удалённый
               провайдер, могут происходить ошибки при попытках проведения запросов.


Структура JSON-файла описания плагина для расширения MobileBalance
==================================================================
 1. JSON-файл должен быть сохранён в кодировке UTF-8. Например, при использовании приложения "Блокнот"
    (Notepad): Главное меню: Файл -> Сохранить как -> Кодировка = UTF-8 -> Сохранить.
 2. Следует обеспечить одинаковое написание для имени JSON-файла, его переменной технического имени "name"
    и первой части имен файлов скриптов (см. описание ниже).

  "description":          String,  Краткое наименование плагина. Обязательно для заполнения.
                                   Отображается в экранных формах расширения. Служит для идентификации
                                   провайдера в списках выбора.

  "name":                 String,  Техническое имя плагина. Обязательно для заполнения.
                                   Используется для связывания записи провайдера с записями учётных данных.
                                   При формировании значения этого поля следует использовать только символы
                                   латиницы, без пробелов и (желательно) без специальных символов.

  "version":              String,  Версия плагина. Предпочтительно - дата его последней редакции
                                   Отображается в сведениях о плагине. Допускается пустое значение строки.

  "author":               String,  Имя (nickname) автора разработки плагина
                                   Отображается в сведениях о плагине. Допускается пустое значение строки.

  "annotation":           String,  Подробное описание назначения и возможностей плагина. Может содержать теги
                                   html-разметки.
                                   Отображается в сведениях о плагине. Допускается пустое значение строки.

  "icon":                 Base64,  Изображение формата SVG (предпочтительно) или PNG высотой 24 пикселя,
                                   закодированное по стандарту Base64. При отсутствии значения (пустая строка)
                                   расширением будет вставлено изображение-заглушка (пиктограмма SIM-карты)

  "custom":               Boolean, Признак наличия записи провайдера в коллекции, распространяемой в составе
                                   расширения (запись есть в файле '.\providers\providers.json').
                                   Для записей добавляемых пользователем устанавливается в 'true'.
                                   Пользовательские записи провайдеров выделяются символом звёздочки в начале
                                   наименования.
                                   Если при обновлении расширения в коллекции есть запись провайдера с таким
                                   же значением параметра 'name' как и у пользовательской, то запись из коллекции
                                   сохраняется как приоритетная, а пользовательская удаляется. Если таких записей
                                   в коллекции нет, то пользовательская запись сохраняется.
                                   Параметр контролируется расширением, его наличие в структуре для загрузки или
                                   изменение в ней этого значения на логику работы расширения не влияет.
                                   true  - провайдер добавлен пользователем (предваряется символом звёздочки)
                                   false - провайдер из состава коллекции

  "startUrl":             String,  URL вызова стартовой страницы личного кабинета провайдера для ввода
                                   учётных данных. Обязательно для заполнения.

  "startUrlClearCookies": Boolean, Удаление перед запросом cookies для страницы
                                   true  - удалять
                                   false - не удалять (по умолчанию)

  "startUrlBypassCache":  Boolean, Обновление кэша стартовой страницы личного кабинета провайдера с сервера
                                   перед выполнением запроса данных (аналог нажития клавиш Ctrl+F5 на странице).
                                   true  - обновить
                                   false - не обновлять (по умолчанию)

  "finishUrl":            String,  URL вызова функции выхода из личного кабинета провайдера. Обязательно
                                   для заполнения.

  "scriptActions": 	      Arrray of Strings, Функциональное назначение частей скрипта плагина. Обязательно
                                   для заполнения. Элементы массива могут принмать следующие значения:
                                   - "log" (для страницы ввода логина / номера),
                                   - "pass" (для страницы ввода пароля),
                                   - "log&pass" (и логин и пароль вводятся на одной странице),
                                   - "polling" (выполнение считывания данных на странице кабинета).
                                   Пример: "scriptActions": [ "log", "pass", "polling" ]
                                           При входе в кабинет на первой его странице вводится учётная
                                           запись (login), на следующей - пароль (password), далее
                                           открывается страница личного кабинета, на которой проводится
                                           запрос данных (polling)

  "scriptFiles":          Arrray of Strings, Имена файлов скриптов в соответствии с их функциональным
                                   назначением, объявленными в "scriptActions". Обязательно для заполнения.
                                   Следует обеспечить написание имени файла плагина в соответствии значению
                                   объявленому в переменной "name" с добавлением индекса, последовательно
                                   увеличивающим значение для последующих файлов набора от 1.
                                   Пример: "name": "Plugin",
                                           "scriptActions": [ "log&pass", "polling" ],
                                           "scriptFiles": [ "Plugin1.js", "Plugin2.js" ]
                                           При входе в кабинет на первой его странице вводятся учётная
                                           запись и пароль (log&pass), для этого используется скрипт из
                                           файла "Plugin1.js". Далее открывается страница личного кабинета,
                                           с которой проводится запрос данных (polling). Это выполняется
                                           с использованием скрипта из файла "Plugin1.js"

  "requestDelay":         Boolean, Пауза между запросами по различным учётным данным к одному провайдеру.
                                   true  - пауза требуется, её значение будет взято из "requestDelayValue"
                                   false - пауза не нужна, значение "requestDelayValue" игнорируется

  "requestDelayValue":    Integer, Значение паузы между запросами к провайдеру, указывается в секундах

  "onUpdateDelay":        Boolean, Задержка на время обновления страницы кабинета провайдера перед
                                   продолжением работы с ней с очередным скриптом плагина. Востребовано
                                   для сайтов провайдеров, которые медленно обновляют страницы кабинетов
                                   после очередного действия.
                                   true  - задержка требуется, её значение будет взято из "onUpdateDelayValue"
                                   false - задержка не нужна, значение "onUpdateDelayValue" игнорируется

  "onUpdateDelayValue":   Integer, Значение задержки при обновлении страницы кабинета, указывается в секундах

  "respondTimeout":       Boolean, Предельное время ожидания ответа скрипта со страницы провайдера (timeout).
                                   При его превышении расширение прекращает запрос по текущим учётным данным,
                                   считая его неуспешным. При неработоспособности сайтов или ошибках на их
                                   страницах предотвращает зависание опроса.
                                   true  - ожидание ответа скрипта требуется, его значение будет взято из
                                           "respondTimeoutValue"
                                   false - ожидание не нужно, значение "respondTimeoutValue" игнорируется

  "respondTimeoutValue":  Integer, Значение времени ожидания ответа на запрос, указывается в секундах

  "inetUnits":            String,  Признак размерности для отображения интернет-трафика. Может принимать
                                   значения:
                                   - "G" (отображать значения в гигабайтах),
                                   - "M" (отображать значения в мегабайтах)
                                   При отсутствии значения устанавливается отображение в гигабайтах

  "ignoreFractional":     Boolean, Отбрасывать (не учитывать) дробную часть баланса при оценке его изменения
                                   true  - отбрасывать копейки в значении баланса
                                   false - оценивать значение баланса вместе с его дробной частью


Пример JSON-структуры:
----------------------
Имя JSON-файла параметров:           MY_PROV.json
Последовательность этапов запроса:   "login", "password", "polling"
Имена файлов скриптов:               MY_PROV1.js, MY_PROV2.js, MY_PROV3.js

%< %< %< %< %< %< %< - Начало файла
{
  "description": "Мой провайдер",
  "name": "MY_PROV",
  "version": "01.04.2021",
  "author": "Этот плагин написал я ;)",
  "annotation": "<i>Запрос данных у моего провайдера</i><br><b>Забирает:</b><br>- баланс;<br>- остаток пакета минут;<br>- остаток пакета SMS;<br>- остаток пакета интернета;<br>- ФИО владельца;<br>- брэнд-наименование тарифа;<br>- дату завершения оплаченного периода;<br>- статус блокировки;<br>- состав услуг (формат: 'бесплатные'&nbsp;/ 'платные'&nbsp;/ (сумма по платным) )",
  "icon": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzk0IiBoZWlnaHQ9Ijk4IiB2aWV3Qm94PSIwIDAgMzk0IDk4IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBmaWxsPSIjZTMwNjEzIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiCiAgICAgIGQ9Ik0zNSwwYy03LjMsMC0xNiw3LTIzLjEsMTguOEM0LjQsMzEuMSwwLDQ2LjIsMCw1OS40YzAsMTkuMywxMC44LDM4LjcsMzUsMzguN2MyNC4yLDAsMzUtMTkuNCwzNS0zOC43CgkgYzAtMTMuMi00LjQtMjguMy0xMS45LTQwLjVDNTEsNyw0Mi4zLDAsMzUsMHogTTIyNC4xLDI4LjloMjQuNXY2My45aDI2LjNWMjguOWgyNC41VjUuM2gtNzUuM1YyOC45TDIyNC4xLDI4Ljl6IE0zNTUuNSwyOC45SDM5NAoJIFY1LjNoLTM4LjVjLTM1LjQsMC01NC4zLDE3LjYtNTQuMyw0My44czE4LjksNDMuOCw1NC4zLDQzLjhIMzk0VjY5LjJoLTM4LjVjLTE2LjQsMC0yNy4xLTUuOS0yNy4xLTIwLjFTMzM5LjEsMjguOSwzNTUuNSwyOC45egoJIE0xNzAuNyw1LjNsLTE0LDUyLjNsLTE0LTUyLjNIOTYuM3Y4Ny42aDI2LjNWMjEuNmwxOS4xLDcxLjJoMzAuMWwxOS4xLTcxLjN2NzEuM2gyNi4zVjUuM0gxNzAuN3oiLz4KPC9zdmc+Cg==",
  "custom": true;
  "startUrl": "https://login.mts.ru/amserver/NUI/?service=login-spa",
  "startUrlClearCookies": false,
  "startUrlBypassCache": true,
  "finishUrl": "https://login.mts.ru/amserver/NUI/?service=login-spa",
  "scriptActions": [ "login", "password", "polling" ],
  "scriptFiles": [ "MY_PROV1.js", "MY_PROV2.js", "MY_PROV3.js" ],
  "requestDelay": false,
  "requestDelayValue": 30,
  "onUpdateDelay": true,
  "onUpdateDelayValue": 2,
  "respondTimeout": true,
  "respondTimeoutValue": 15,
  "inetUnits": "G",
  "ignoreFractional": false
}
%< %< %< %< %< %< %< - Конец файла
